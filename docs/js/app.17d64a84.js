(function(){var e={7165:function(e,t,o){"use strict";var a=o(9963),l=o(6252),s=o(3577);const n={class:"wrapper"},i={class:"left-panel"},r=["onClick","title"],d={class:"table-panel"},m={class:"table"},c=["onInput","value"],p=["onClick"],u=["href"];function f(e,t,o,a,f,b){const w=(0,l.up)("edit_window"),h=(0,l.up)("repo_window"),v=(0,l.up)("saved_toast"),y=(0,l.up)("loader");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",n,[(0,l._)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aMenu,((e,t)=>((0,l.wg)(),(0,l.iD)("button",{key:t,class:"btn",onClick:t=>b.fnClickLeftMenu(e),title:e.title},[(0,l._)("i",{class:(0,s.C_)("bi "+e.icon)},null,2)],8,r)))),128))]),(0,l._)("div",d,[(0,l._)("div",m,[(0,l._)("div",{class:"table-row header",style:(0,s.j5)(b.sHeaderStyles)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.oStruct,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"cell header"},[(0,l.Uk)((0,s.zw)(e.label)+" ",1),(0,l._)("input",{type:"text",class:"form-control",onInput:e=>b.fnFilterInput(e,t),value:b.oTable.filter[t]},null,40,c)])))),128))],4),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.aRows,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:(0,s.C_)("table-row "+(f.oSelectedItem&&f.oSelectedItem.id==e.id?"active":"")),style:(0,s.j5)(b.sHeaderStyles),onClick:t=>b.fnItemClick(e)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.oStruct,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:"cell"},[e[o]&&"url"==o?((0,l.wg)(),(0,l.iD)("a",{key:0,href:e[o]},(0,s.zw)(e[o]),9,u)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,s.zw)(e[o]),1)],64))])))),128))],14,p)))),128))])])]),(0,l.Wm)(w,{title:"Редактирование",form_name:f.sTableName,table_name:f.sTableName},null,8,["form_name","table_name"]),(0,l.Wm)(h),(0,l.Wm)(v),(0,l.Wm)(y)],64)}var b=o(3907);function w(e){return e[0].split(" ")}function h(e){return{[e]:{get(){return this.$store.state[e]},set(t){this.$store.commit("fnUpdateVar",{sName:e,sV:t})}}}}function v(e){var t={},o=e.split(" ");for(var a of o)t=Object.assign(t,h(a));return t}function y(e,t){var o="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("A");a.setAttribute("href",o),a.setAttribute("download",`${e}_${(new Date).getTime()}.json`),a.click(),a.remove()}const _={key:0},g=(0,l._)("div",{class:"overlay"},null,-1),R={class:"modal show"},I={class:"modal-dialog"},k={class:"modal-content"},S={class:"modal-header"},F={class:"modal-title"},D={class:"modal-body"},V={class:"modal-footer"};function C(e,t,o,a,n,i){const r=(0,l.up)("forms");return i.bShow?((0,l.wg)(),(0,l.iD)("div",_,[g,(0,l._)("div",R,[(0,l._)("div",I,[(0,l._)("div",k,[(0,l._)("div",S,[(0,l._)("h5",F,(0,s.zw)(o.title),1),(0,l._)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...e)=>i.fnClose&&i.fnClose(...e))})]),(0,l._)("div",D,[(0,l.Wm)(r,{form_name:o.form_name},null,8,["form_name"])]),(0,l._)("div",V,[(0,l._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>i.fnClose&&i.fnClose(...e))},"Отмена"),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>i.fnSave&&i.fnSave(...e))},"Сохранить")])])])])])):(0,l.kq)("",!0)}function U(e,t,o,a,s,n){const i=(0,l.up)("form_component");return(0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.oItems,((e,t)=>((0,l.wg)(),(0,l.j4)(i,{key:e,item:e,onInput:e=>n.fnInput(e,t),value:n.fnGetFieldValue(this.form_name,t)},null,8,["item","onInput","value"])))),128)}const x={key:0,class:"mb-3"},L={class:"form-label"},W=["placeholder"],N={key:1,class:"mb-3"},T={class:"form-label"},P=["placeholder"],H={key:2,class:"mb-3"},E={class:"form-label"},O=["placeholder"],z={key:3,class:"mb-3"},q={class:"form-label"},A=["placeholder"],Y={key:4,class:"mb-3"},J={class:"form-label"},G=["placeholder"],K={key:5,class:"mb-3"},j={class:"form-label"},M=["placeholder"],$={key:6,class:"mb-3"},Z={class:"form-label"},B=(0,l._)("input",{type:"file",class:"form-control"},null,-1),Q={key:7,class:"mb-3"},X={class:"form-label"},ee=["placeholder"],te={key:8,class:"mb-3"},oe={class:"form-label"},ae=["placeholder"],le={key:9,class:"mb-3"},se={class:"form-label"},ne=["placeholder"],ie={key:10,class:"mb-3"},re={class:"form-label"},de=["placeholder","min","max"],me={key:11,class:"mb-3"},ce={class:"form-label"},pe=["placeholder"],ue={key:12,class:"mb-3"},fe={class:"form-label"},be=["placeholder"],we={key:13,class:"mb-3"},he={class:"form-label"},ve=["placeholder"],ye={key:14,class:"mb-3"},_e={class:"form-label"},ge=["placeholder"],Re={key:15,class:"mb-3"},Ie={class:"form-label"},ke=["placeholder"],Se={key:16,class:"mb-3"},Fe={class:"form-label"},De=["value"],Ve={key:17,class:"mb-3"},Ce={class:"form-label"},Ue=["value"],xe={key:18,class:"mb-3"},Le={class:"form-label"},We=["value"];function Ne(e,t,o,n,i,r){return(0,l.wg)(),(0,l.iD)(l.HY,null,["text"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",x,[(0,l._)("label",L,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>r.mValue=e)},null,8,W),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"textarea"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("label",T,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("textarea",{class:"form-control",rows:"10",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[1]||(t[1]=e=>r.mValue=e)},null,8,P),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"email"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",H,[(0,l._)("label",E,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"email",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[2]||(t[2]=e=>r.mValue=e)},null,8,O),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"color"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("label",q,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"color",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[3]||(t[3]=e=>r.mValue=e)},null,8,A),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"date"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",Y,[(0,l._)("label",J,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"date",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[4]||(t[4]=e=>r.mValue=e)},null,8,G),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"datetime-local"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("label",j,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"datetime-local",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[5]||(t[5]=e=>r.mValue=e)},null,8,M),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"file"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",$,[(0,l._)("label",Z,(0,s.zw)(r.oItem.label),1),B])):(0,l.kq)("",!0),"month"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",Q,[(0,l._)("label",X,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"month",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[6]||(t[6]=e=>r.mValue=e)},null,8,ee),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"number"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",te,[(0,l._)("label",oe,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[7]||(t[7]=e=>r.mValue=e)},null,8,ae),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"password"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",le,[(0,l._)("label",se,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"password",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[8]||(t[8]=e=>r.mValue=e)},null,8,ne),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"range"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",ie,[(0,l._)("label",re,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"range",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[9]||(t[9]=e=>r.mValue=e),min:r.oItem.min,max:r.oItem.max},null,8,de),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"search"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",me,[(0,l._)("label",ce,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"search",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[10]||(t[10]=e=>r.mValue=e)},null,8,pe),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"tel"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("label",fe,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"tel",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[11]||(t[11]=e=>r.mValue=e)},null,8,be),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"time"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",we,[(0,l._)("label",he,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"time",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[12]||(t[12]=e=>r.mValue=e)},null,8,ve),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"url"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",ye,[(0,l._)("label",_e,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"url",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[13]||(t[13]=e=>r.mValue=e)},null,8,ge),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"week"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",Re,[(0,l._)("label",Ie,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("input",{type:"week",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[14]||(t[14]=e=>r.mValue=e)},null,8,ke),[[a.nr,r.mValue]])])):(0,l.kq)("",!0),"checkbox_list"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",Se,[(0,l._)("label",Fe,(0,s.zw)(r.oItem.label),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.oItem.items,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>r.mValue=e),value:e.value},null,8,De),[[a.e8,r.mValue]]),(0,l.Uk)((0,s.zw)(e.label),1)])])))),128))])):(0,l.kq)("",!0),"radio_list"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",Ve,[(0,l._)("label",Ce,(0,s.zw)(r.oItem.label),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.oItem.items,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"radio","onUpdate:modelValue":t[16]||(t[16]=e=>r.mValue=e),value:e.value},null,8,Ue),[[a.G2,r.mValue]]),(0,l.Uk)((0,s.zw)(e.label),1)])])))),128))])):(0,l.kq)("",!0),"select"==r.oItem.type?((0,l.wg)(),(0,l.iD)("div",xe,[(0,l._)("label",Le,(0,s.zw)(r.oItem.label),1),(0,l.wy)((0,l._)("select",{class:"form-control","onUpdate:modelValue":t[17]||(t[17]=e=>r.mValue=e)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.oItem.items,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e.value},(0,s.zw)(e.label),9,We)))),128))],512),[[a.bM,r.mValue]])])):(0,l.kq)("",!0)],64)}var Te={props:["item","value"],emits:["input"],computed:{oItem(){return this.item},mValue:{get(){return this.value},set(e){this.$emit("input",e)}}}},Pe=o(3744);const He=(0,Pe.Z)(Te,[["render",Ne]]);var Ee=He,Oe={props:["form_name"],components:{form_component:Ee},computed:{oItems(){return this.$store.state.oStructure[this.form_name]}},methods:{fnGetFieldValue(e,t){return this.$store.getters.fnGetFieldValue(e,t)},fnInput(e,t){this.$store.commit("fnUpdateFormVar",{sFormName:this.form_name,sFieldName:t,mV:e})}}};const ze=(0,Pe.Z)(Oe,[["render",U]]);var qe=ze,Ae={props:["title","form_name","table_name"],components:{forms:qe},computed:{bShow(){return this.$store.state.oEditWindow[this.form_name].window_show}},methods:{...(0,b.OI)(w`fnHideEditWindow fnEditWindowSave`),fnClose(){this.fnHideEditWindow(this.form_name)},fnSave(){this.fnEditWindowSave({sTableName:this.table_name,sFormName:this.form_name}),this.fnHideEditWindow(this.form_name)}}};const Ye=(0,Pe.Z)(Ae,[["render",C]]);var Je=Ye;const Ge=(0,l._)("div",{class:"block-overlay"},null,-1),Ke={id:"modal-ask-api-key",class:"modal show",tabindex:"-1"},je={class:"modal-dialog"},Me={class:"modal-content"},$e=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title"},"Данные репозитория")],-1),Ze={class:"modal-body",style:{height:"500px","overflow-y":"scroll"}},Be={class:"modal-ask-api_list_buttons"},Qe=(0,l._)("div",null,null,-1),Xe={class:"mb-3"},et=(0,l._)("label",{for:"",class:"form-label"},"Логин",-1),tt=(0,l._)("option",{value:"github"},"github",-1),ot=(0,l._)("option",{value:"webdav"},"webdav",-1),at=[tt,ot],lt={class:"mb-3"},st=(0,l._)("label",{for:"",class:"form-label"},"Название",-1),nt={class:"mb-3"},it=(0,l._)("label",{for:"",class:"form-label"},"Логин",-1),rt={class:"mb-3"},dt=(0,l._)("label",{for:"",class:"form-label"},"Репозиторий",-1),mt={class:"mb-3"},ct=(0,l._)("label",{for:"",class:"form-label"},"API Ключ",-1),pt={class:"mb-3"},ut=(0,l._)("label",{for:"",class:"form-label"},"URL",-1),ft={class:"mb-3"},bt=(0,l._)("label",{for:"",class:"form-label"},"Пользователь",-1),wt={class:"mb-3"},ht=(0,l._)("label",{for:"",class:"form-label"},"Пароль",-1),vt={class:"modal-ask-api_list_buttons"},yt={class:"actions"},_t={class:"list-repo-item_desc"},gt={class:"list-repo-item_title"},Rt={class:"list-repo-item_type"},It={class:"list-repo-item_name"},kt=(0,l._)("b",null,"login:",-1),St=(0,l._)("b",null,"repo:",-1),Ft=(0,l._)("b",null,"key:",-1),Dt=(0,l._)("b",null,"url:",-1),Vt=(0,l._)("b",null,"username:",-1),Ct=(0,l._)("b",null,"password:",-1),Ut={style:{display:"flex","align-items":"start"}},xt=["onClick"],Lt=(0,l._)("i",{class:"bi bi-pencil"},null,-1),Wt=[Lt],Nt=["onClick"],Tt=(0,l._)("i",{class:"bi bi-trash"},null,-1),Pt=[Tt],Ht=(0,l._)("div",{style:{width:"32px",height:"29px"}},null,-1),Et=(0,l._)("div",{style:{width:"32px",height:"29px"}},null,-1),Ot=["onClick"],zt=(0,l._)("i",{class:"bi bi-star-fill"},null,-1),qt=[zt],At={class:"modal-footer"};function Yt(e,t,o,n,i,r){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",null,[Ge,(0,l._)("div",Ke,[(0,l._)("div",je,[(0,l._)("div",Me,[$e,(0,l._)("div",Ze,[null!==i.iEditIndex?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Be,[Qe,(0,l._)("div",null,[(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>r.fnCancelRepo&&r.fnCancelRepo(...e))},"Отмена"),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>r.fnSaveRepo&&r.fnSaveRepo(...e))},"Сохранить")])]),(0,l._)("div",Xe,[et,(0,l.wy)((0,l._)("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.sFromType=e)},at,512),[[a.bM,i.sFromType]])]),(0,l._)("div",lt,[st,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=t=>e.sFormName=t)},null,512),[[a.nr,e.sFormName]])]),"github"==i.sFromType?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",nt,[it,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>i.sFormLogin=e)},null,512),[[a.nr,i.sFormLogin]])]),(0,l._)("div",rt,[dt,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>i.sFormRepo=e)},null,512),[[a.nr,i.sFormRepo]])]),(0,l._)("div",mt,[ct,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>i.sFormKey=e)},null,512),[[a.nr,i.sFormKey]])])],64)):(0,l.kq)("",!0),"webdav"==i.sFromType?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",pt,[ut,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>i.sFormURL=e)},null,512),[[a.nr,i.sFormURL]])]),(0,l._)("div",ft,[bt,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=t=>e.sFormUsername=t)},null,512),[[a.nr,e.sFormUsername]])]),(0,l._)("div",wt,[ht,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=t=>e.sFormPassword=t)},null,512),[[a.nr,e.sFormPassword]])])],64)):(0,l.kq)("",!0)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",vt,[(0,l._)("div",null,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"Пароль от БД","onUpdate:modelValue":t[10]||(t[10]=t=>e.sPassword=t)},null,512),[[a.nr,e.sPassword]])]),(0,l._)("div",yt,[(0,l._)("button",{class:"btn btn-secondary",onClick:t[11]||(t[11]=(...e)=>r.fnExport&&r.fnExport(...e))},"Экспортировать"),(0,l._)("button",{class:"btn btn-danger",onClick:t[12]||(t[12]=(...e)=>r.fnCleanRepo&&r.fnCleanRepo(...e))},"Очистить"),(0,l._)("button",{class:"btn btn-success",onClick:t[13]||(t[13]=(...e)=>r.fnNewRepo&&r.fnNewRepo(...e))},"Добавить")])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.aReposList,((t,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:(0,s.C_)("list-repo-item "+(e.iSelectedRepoIndex==o?"active":""))},[t?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",_t,[(0,l._)("div",gt,[(0,l._)("div",Rt,(0,s.zw)(t.type),1),(0,l._)("div",It,(0,s.zw)(t.name),1)]),"github"==t.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",null,[kt,(0,l.Uk)(" "+(0,s.zw)(t.login),1)]),(0,l._)("div",null,[St,(0,l.Uk)(" "+(0,s.zw)(t.repo),1)]),(0,l._)("div",null,[Ft,(0,l.Uk)(" "+(0,s.zw)(t.key),1)])],64)):(0,l.kq)("",!0),"webdav"==t.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",null,[Dt,(0,l.Uk)(" "+(0,s.zw)(t.url),1)]),(0,l._)("div",null,[Vt,(0,l.Uk)(" "+(0,s.zw)(t.username),1)]),(0,l._)("div",null,[Ct,(0,l.Uk)(" "+(0,s.zw)(t.password),1)])],64)):(0,l.kq)("",!0)]),(0,l._)("div",Ut,["localstorage"!=t.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("button",{class:"btn btn-success",onClick:e=>r.fnEditRepo(o),title:"Редактировать"},Wt,8,xt),(0,l._)("button",{class:"btn btn-danger",onClick:e=>r.fnRemoveRepo(o),title:"Удалить"},Pt,8,Nt)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[Ht,Et],64)),(0,l._)("button",{class:"btn btn-info",onClick:e=>r.fnSelectRepo(o),title:"Выбрать"},qt,8,Ot)])],64)):(0,l.kq)("",!0)],2)))),128))],64))]),(0,l._)("div",At,[(0,l._)("button",{class:"btn btn-success",onClick:t[14]||(t[14]=e=>r.fnAcceptRepo())},"Выбрать")])])])])],512)),[[a.F8,e.bShowRepoWindow]])}var Jt={name:"AskAPIWindow",components:{},computed:{...(0,b.rn)(w`iSelectedRepoIndex bShowRepoWindow`),...(0,b.Se)(w`aReposList`),...v("sPassword")},data(){return{iEditIndex:null,sFormLogin:"",sFormRepo:"",sFormKey:"",sFormURL:"",sFromType:"github"}},methods:{...(0,b.OI)(w`fnReposRemove fnReposSelect fnReposClean fnReposUpdate`),...(0,b.nv)(w`fnPrepareRepo`),fnSaveRepo(){if(this.sFormName){var e={name:this.sFormName,login:this.sFormLogin,repo:this.sFormRepo,key:this.sFormKey,type:this.sFromType,url:this.sFormURL,username:this.sFormUsername,password:this.sFormPassword};this.fnReposUpdate({iIndex:this.iEditIndex,oObj:e}),this.iEditIndex=null}else alert("Надо заполнить поле - Название")},fnNewRepo(){this.iEditIndex=-1,this.sFormName="",this.sFormLogin="",this.sFormRepo="",this.sFormKey="",this.sFormType="github",this.sFormURL="",this.sFormUsername="",this.sFormPassword=""},fnEditRepo(e){this.iEditIndex=e;var t=this.aReposList[this.iEditIndex];this.sFormName=t.name,this.sFormLogin=t.login,this.sFormRepo=t.repo,this.sFormKey=t.key,this.sFormType=t.type,this.sFormURL=t.url,this.sFormUsername=t.username,this.sFormPassword=t.password},fnRemoveRepo(e){this.fnReposRemove(e)},fnSelectRepo(e){this.fnReposSelect(e)},fnCleanRepo(){this.fnReposClean()},fnCancelRepo(){this.iEditIndex=null},fnAcceptRepo(){if(!this.aReposList[this.iSelectedRepoIndex])return alert("Нужно выбрать репозиторий");this.fnPrepareRepo()},fnExport(){y("database",JSON.stringify(this.aReposList))}},created(){}};const Gt=(0,Pe.Z)(Jt,[["render",Yt]]);var Kt=Gt;const jt={class:"toast-container position-fixed top-0 end-0 p-3"},Mt={key:0,class:"toast fade show",role:"alert","aria-live":"assertive","aria-atomic":"true"},$t=(0,l._)("div",{class:"toast-header"},[(0,l._)("strong",{class:"me-auto"},"Сохранено"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1),Zt=(0,l._)("div",{class:"toast-body"}," Данные были сохранены ",-1),Bt=[$t,Zt];function Qt(e,t,o,a,s,n){return(0,l.wg)(),(0,l.iD)("div",jt,[e.bShowSaveToast?((0,l.wg)(),(0,l.iD)("div",Mt,Bt)):(0,l.kq)("",!0)])}var Xt={name:"SavedToast",components:{},computed:{...v("bShowSaveToast")},data(){return{}},watch:{bShowSaveToast(e,t){e&&setTimeout((()=>{this.bShowSaveToast=!1}),2e3)}}};const eo=(0,Pe.Z)(Xt,[["render",Qt]]);var to=eo;const oo={class:"loader"},ao=(0,l._)("div",{class:"center"},[(0,l._)("div",{class:"lds-dual-ring"})],-1),lo=[ao];function so(e,t,o,s,n,i){return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",oo,lo,512)),[[a.F8,e.bShowLoader]])}var no={computed:{...(0,b.rn)(w`bShowLoader`)}};const io=(0,Pe.Z)(no,[["render",so]]);var ro=io,mo={name:"App",components:{edit_window:Je,repo_window:Kt,saved_toast:to,loader:ro},computed:{...v("bShowRepoWindow bShowSaveToast sPassword"),sHeaderStyles(){return{display:"grid","grid-template-columns":"1fr ".repeat(this.iStructLength)}},iStructLength(){return Object.keys(this.oStruct).length},oStruct(){return this.$store.state.oStructure["table"]},oTable(){return this.$store.state.oDatabase["table"]},iMaxPages(){return Math.ceil(this.aRows.length/this.iPageCount)},aRows(){var e=this.oTable.data.filter((e=>{var t=!0;for(var o in this.oTable.filter)console.log(this.oTable.filter[o]),this.oTable.filter[o]&&(console.log(this.oTable.filter[o]),t=t&&~e[o].indexOf(this.oTable.filter[o]));return t}));return e},aSlicedRows(){var e=this.aRows.slice((this.sPage-1)*this.iPageCount,this.sPage*this.iPageCount);return e}},data(){return{aMenu:[{id:"repo-window",title:"Выбрать репозиторий",icon:"bi-person-fill"},{id:"save",title:"Сохранить",icon:"bi-arrow-up-square"},{id:"add",title:"Добавить",icon:"bi-plus-lg"},{id:"edit",title:"Редактировать",icon:"bi-pencil"},{id:"remove",title:"Удалить",icon:"bi-trash"}],oSelectedItem:null,sTableName:"table"}},methods:{...(0,b.OI)(w`fnLoadRepos fnShowEditWindow fnRemoveFromTable`),...(0,b.nv)(w`fnSaveDatabase`),fnFilterInput(e,t){this.$store.commit("fnUpdateFilter",{sTableName:this.sTableName,sName:t,sV:e.target.value})},fnClickLeftMenu(e){"repo-window"==e.id&&(this.bShowRepoWindow=!0),"save"==e.id&&this.fnSaveAll(),"add"==e.id&&this.fnAddClick(),"edit"==e.id&&this.fnEditClick(),"remove"==e.id&&this.fnRemoveClick()},fnItemClick(e){this.oSelectedItem=e},fnAddClick(){this.fnShowEditWindow({sFormName:this.sTableName,oItem:{}})},fnEditClick(){this.oSelectedItem?this.fnShowEditWindow({sFormName:this.sTableName,oItem:this.oSelectedItem}):alert("Нужно выбрать")},fnRemoveClick(){this.oSelectedItem?this.fnRemoveFromTable({sTableName:this.sTableName,oItem:this.oSelectedItem}):alert("Нужно выбрать")},fnSaveAll(){this.fnSaveDatabase(),this.bShowSaveToast=!0}},created(){var e=this;this.fnLoadRepos(),document.addEventListener("keydown",(t=>{t.ctrlKey&&83===t.keyCode&&(t.preventDefault(),e.fnSaveAll())}))}};const co=(0,Pe.Z)(mo,[["render",f]]);var po=co,uo=o(3473),fo=o(9478),bo=o(2300),wo=o(1354),ho=o(4253);class vo{static octokit=null;static oSHA={};static webdav=null;static oRepoItem=null;static fnInit(e){vo.oRepoItem=e,"github"==e.type&&vo.fnInitGit(),"webdav"==e.type&&vo.fnInitWebdav(),e.type}static fnInitGit(){vo.octokit=new uo.v({auth:vo.oRepoItem.key})}static fnInitWebdav(){vo.webdav=(0,fo.createClient)(vo.oRepoItem.url,{username:vo.oRepoItem.username,password:vo.oRepoItem.password})}static fnReadFileJSON(e){return new Promise(((t,o)=>{this.fnReadFile(e).then((({sData:e})=>{t(JSON.parse(e))})).catch((e=>{o(e)}))}))}static fnReadFileCryptoJSON(e,t){return new Promise(((o,a)=>{this.fnReadFile(e).then((({sData:e})=>{e||a("Not Found"),o(JSON.parse(ho.decrypt(e,t).toString(wo.enc.Utf8)))})).catch((e=>{a(e)}))}))}static fnReadFile(e){return"localstorage"==vo.oRepoItem.type?vo.fnReadFileLocalStorage(e):"github"==vo.oRepoItem.type?vo.fnReadFileGithub(e):"webdav"==vo.oRepoItem.type?vo.fnReadFileWebdav(e):void 0}static fnWriteFileJSON(e,t){return this.fnWriteFile(e,JSON.stringify(t,null,4))}static fnWriteFileCryptoJSON(e,t,o){return this.fnWriteFile(e,ho.encrypt(JSON.stringify(t,null,4),o).toString())}static fnWriteFile(e,t){return"localstorage"==vo.oRepoItem.type?vo.fnWriteFileLocalStorage(e,t):"github"==vo.oRepoItem.type?vo.fnWriteFileGithub(e,t):"webdav"==vo.oRepoItem.type?vo.fnWriteFileWebdav(e,t):void 0}static fnCreateDir(e){if("webdav"==vo.oRepoItem.type)return vo.fnCreateDirWebdav(e)}static fnCreateDirWebdav(e){return new Promise(((t,o)=>{_l(">>>",e),vo.webdav.createDirectory(e),t()}))}static fnReadFileLocalStorage(e){return new Promise((async(t,o)=>{var a=localStorage.getItem(e);t({sData:a,sSHA:""})}))}static fnReadFileWebdav(e){vo.oRepoItem;return new Promise((async(t,o)=>{try{var a=await vo.webdav.getFileContents(e),l=new TextDecoder("utf-8"),s=l.decode(a);vo.oSHA[e]="",t({sData:s,sSHA:""})}catch(n){console.error(n),o(n)}}))}static fnReadFileGithub(e){return new Promise((async(t,o)=>{var a=vo.oRepoItem;return console.log("read",a),e=e.replace(/^\/+/,""),vo.octokit.rest.repos.getContent({owner:a.login,repo:a.repo,path:e}).then((({data:o})=>{var a=(0,bo.Jx)(o.content);vo.oSHA[e]=o.sha,console.log(vo.oSHA),t({sData:a,sSHA:o.sha})})).catch((e=>{console.error(e),o(e)}))}))}static fnWriteFileLocalStorage(e,t){return new Promise((async(o,a)=>{localStorage.setItem(e,t),o()}))}static fnWriteFileGithub(e,t,o=null){return new Promise((async(a,l)=>{var s=vo.oRepoItem;return console.log("write",s),e=e.replace(/^\/+/,""),vo.octokit.rest.repos.createOrUpdateFileContents({owner:s.login,repo:s.repo,path:e,sha:o||vo.oSHA[e],message:vo.fnGetUpdateMessage(),content:(0,bo.cv)(t)}).then((()=>{a()})).catch((e=>{console.error(e),l(e)}))}))}static fnWriteFileWebdav(e,t){return new Promise((async(o,a)=>{vo.oRepoItem;return new Promise((async(o,a)=>{try{var l=new TextEncoder,s=l.encode(t);await vo.webdav.putFileContents(e,s,{contentLength:!1,overwrite:!0}),o()}catch(n){a(n)}}))}))}static fnGetUpdateMessage(){return"update: "+new Date}}const yo="passwords-database";var _o=(0,b.MT)({state(){return{bShowRepoWindow:!0,aDefaultRepoList:[{type:"localstorage",name:"Локальное хранилище"}],aReposList:[],iSelectedRepoIndex:null,bShowLoader:!1,bShowSaveToast:!1,sPassword:"",oStructure:{table:{category:{label:"Категория",type:"text"},name:{label:"Название",type:"text"},login:{label:"Логин",type:"text"},password:{label:"Пароль",type:"text"},url:{label:"URL",type:"text"},description:{label:"Описание",type:"textarea"}}},oDatabase:{table:{last_index:100,data:[],selection_id:null,filter:{category:"",name:"",login:"",password:"",url:"",description:""}}},oEditWindow:{table:{window_show:!1,edit_item:{}}},oForms:{table:{category:"",name:"",login:"",password:"",url:"",description:""}},sMode:"tasks"}},mutations:{fnUpdateFormVar(e,{sFormName:t,sFieldName:o,mV:a}){e.oForms[t][o]=a},fnUpdateDatabaseVar(e,{sTableName:t,sVarName:o,mV:a}){e.oDatabase[t][o]=a},fnUpdateVar(e,{sName:t,sV:o}){e[t]=o,"sPassword"==t&&localStorage.setItem("sPassword",o)},fnUpdateFilter(e,{sTableName:t,sName:o,sV:a}){e.oDatabase[t].filter[o]=a},fnReposRemove(e,t){e.aReposList.splice(t-e.aDefaultRepoList.length,1),localStorage.setItem("aReposList",JSON.stringify(e.aReposList))},fnReposSelect(e,t){e.iSelectedRepoIndex=t},fnReposClean(e){e.aReposList=[],localStorage.setItem("aReposList",JSON.stringify(e.aReposList))},fnReposUpdate(e,{iIndex:t,oObj:o}){-1==t?e.aReposList.push(o):e.aReposList.splice(t-e.aDefaultRepoList.length,1,o),localStorage.setItem("aReposList",JSON.stringify(e.aReposList))},fnLoadRepos(e){try{e.aReposList=JSON.parse(localStorage.getItem("aReposList")||"[]"),e.sPassword=localStorage.getItem("sPassword")||""}catch(t){}},fnUpdateDatabase(e,t){e.oDatabase=t},fnHideRepoWindow(e){e.bShowRepoWindow=!1},fnShowRepoWindow(e){e.bShowRepoWindow=!0},fnShowLoader(e){e.bShowLoader=!0},fnHideLoader(e){e.bShowLoader=!1},fnHideEditWindow(e,t){e.oEditWindow[t].window_show=!1},fnShowEditWindow(e,{sFormName:t,oItem:o}){for(var a in e.oEditWindow[t].window_show=!0,e.oEditWindow[t].edit_item=o,e.oForms[t])e.oForms[t][a]=a in o?o[a]:""},fnEditWindowSave(e,{sTableName:t,sFormName:o}){for(var a in e.oForms[o])e.oEditWindow[o].edit_item[a]=e.oForms[o][a];e.oEditWindow[o].edit_item.id||(e.oEditWindow[o].edit_item.id=++e.oDatabase[t]["last_index"],e.oDatabase[t]["data"].push(e.oEditWindow[o].edit_item))},fnRemoveFromTable(e,{sTableName:t,oItem:o}){e.oDatabase[t]["data"]=e.oDatabase[t]["data"].filter((e=>e.id!=o.id))}},actions:{fnPrepareRepo({commit:e,state:t,dispatch:o,getters:a}){e("fnHideRepoWindow"),vo.fnInit(a.oCurrentRepo),o("fnLoadDatabase")},fnSaveDatabase({commit:e,state:t}){return vo.fnWriteFileCryptoJSON(yo,t.oDatabase,t.sPassword).catch((()=>{vo.fnReadFile(yo).then((()=>vo.fnWriteFileCryptoJSON(yo,t.oDatabase,t.sPassword)))}))},fnLoadDatabase({commit:e,state:t}){e("fnShowLoader"),vo.fnReadFileCryptoJSON(yo,t.sPassword).then((t=>{if(!t)throw"Cannot destructure property";e("fnUpdateDatabase",t),e("fnHideLoader")})).catch((o=>{if(console.error(o),(o+"").match(/Malformed UTF-8 data/))return alert("Не правильный пароль"),void e("fnShowRepoWindow");(o+"").match(/Cannot destructure property/)||(o+"").match(/Not Found/)?vo.fnWriteFileCryptoJSON(yo,t.oDatabase,t.sPassword).then((()=>{vo.fnReadFileCryptoJSON(yo,t.sPassword).then((t=>{e("fnUpdateDatabase",t),e("fnHideLoader")}))})):e("fnShowRepoWindow")}))},fnDropDatabase({commit:e,state:t}){localStorage.setItem(yo,null)},fnGetFieldValue:({state:e,getters:t})=>(e,o)=>t.fnGetFieldValue(e,o)},getters:{fnGetFieldValue:e=>(t,o)=>e.oForms[t][o],aReposList(e){return e.aDefaultRepoList.concat(e.aReposList)},oCurrentRepo(e,t){return t.aReposList[e.iSelectedRepoIndex]},fnFilterGroups:e=>t=>e.oDatabase.tasks_groups.filter((e=>~e.name.indexOf(t)))}});(0,a.ri)(po).use(_o).mount("#app")},2480:function(){}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,l,s){if(!a){var n=1/0;for(m=0;m<e.length;m++){a=e[m][0],l=e[m][1],s=e[m][2];for(var i=!0,r=0;r<a.length;r++)(!1&s||n>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[r])}))?a.splice(r--,1):(i=!1,s<n&&(n=s));if(i){e.splice(m--,1);var d=l();void 0!==d&&(t=d)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[a,l,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,s,n=a[0],i=a[1],r=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(r)var m=r(o)}for(t&&t(a);d<n.length;d++)s=n[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(m)},a=self["webpackChunkwapp_simple_password_manager_vue"]=self["webpackChunkwapp_simple_password_manager_vue"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(7165)}));a=o.O(a)})();
//# sourceMappingURL=app.17d64a84.js.map